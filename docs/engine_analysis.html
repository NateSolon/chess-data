---

title: Engine


keywords: fastai
sidebar: home_sidebar

summary: "Use a chess engine to analyze moves."
description: "Use a chess engine to analyze moves."
nb_path: "02_engine_analysis.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_engine_analysis.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">stockfish</span> <span class="o">=</span> <span class="s2">&quot;stockfish_14_linux_x64_popcnt/stockfish_14_x64_popcnt&quot;</span> <span class="c1"># location of stockfish executable or alias</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">chess</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">SimpleEngine</span><span class="o">.</span><span class="n">popen_uci</span><span class="p">(</span><span class="n">stockfish</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pgn</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/magnus.pgn&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">game</span> <span class="o">=</span> <span class="n">chess</span><span class="o">.</span><span class="n">pgn</span><span class="o">.</span><span class="n">read_game</span><span class="p">(</span><span class="n">pgn</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">game</span><span class="o">.</span><span class="n">headers</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Headers(Event=&#39;Rated Blitz game&#39;, Site=&#39;https://lichess.org/lAV0T0zl&#39;, Date=&#39;2021.12.23&#39;, Round=&#39;?&#39;, White=&#39;DrNykterstein&#39;, Black=&#39;may6enexttime&#39;, Result=&#39;1-0&#39;, BlackElo=&#39;2974&#39;, BlackRatingDiff=&#39;-2&#39;, BlackTitle=&#39;GM&#39;, ECO=&#39;B20&#39;, Termination=&#39;Normal&#39;, TimeControl=&#39;180+0&#39;, UTCDate=&#39;2021.12.23&#39;, UTCTime=&#39;23:28:07&#39;, Variant=&#39;Standard&#39;, WhiteElo=&#39;3212&#39;, WhiteRatingDiff=&#39;+2&#39;, WhiteTitle=&#39;GM&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="evaluate_game" class="doc_header"><code>evaluate_game</code><a href="https://github.com/NateSolon/chessdata/tree/main/chessdata/engine.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>evaluate_game</code>(<strong><code>game</code></strong>, <strong><code>engine</code></strong>, <strong><code>limit</code></strong>=<em><code>Limit(time=0.1)</code></em>)</p>
</blockquote>
<p>Go through a game move-by-move and evaluate each position with an engine.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">evals</span> <span class="o">=</span> <span class="n">evaluate_game</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">evals</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[28,
 46,
 -20,
 -20,
 -12,
 -9,
 33,
 67,
 27,
 20,
 -116,
 -95,
 -55,
 -50,
 -46,
 -67,
 -118,
 -136,
 -159,
 -138,
 -144,
 -141,
 -123,
 -16,
 -70,
 -62,
 -59,
 -49,
 -81,
 -57,
 -70,
 -42,
 -27,
 8,
 -21,
 10,
 18,
 0,
 0,
 319,
 350,
 375,
 330,
 275,
 261,
 347,
 379,
 559,
 517,
 525,
 528,
 548,
 554,
 617,
 610]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="evaluate_pgn" class="doc_header"><code>evaluate_pgn</code><a href="https://github.com/NateSolon/chessdata/tree/main/chessdata/engine.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>evaluate_pgn</code>(<strong><code>pgn</code></strong>, <strong><code>engine</code></strong>, <strong><code>limit</code></strong>=<em><code>Limit(time=0.1)</code></em>)</p>
</blockquote>
<p>Evaluate all games in a PGN with the engine.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pgn</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/magnus.pgn&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">evals</span> <span class="o">=</span> <span class="n">evaluate_pgn</span><span class="p">(</span><span class="n">pgn</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">evals</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>...</th>
      <th>127</th>
      <th>128</th>
      <th>129</th>
      <th>130</th>
      <th>131</th>
      <th>132</th>
      <th>133</th>
      <th>134</th>
      <th>135</th>
      <th>136</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>26</td>
      <td>35</td>
      <td>-23</td>
      <td>-11</td>
      <td>-8</td>
      <td>0</td>
      <td>15</td>
      <td>62</td>
      <td>25</td>
      <td>54</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>31</td>
      <td>32</td>
      <td>38</td>
      <td>44</td>
      <td>24</td>
      <td>25</td>
      <td>38</td>
      <td>26</td>
      <td>38</td>
      <td>26</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>43</td>
      <td>33</td>
      <td>-19</td>
      <td>-25</td>
      <td>-7</td>
      <td>-3</td>
      <td>-9</td>
      <td>9</td>
      <td>24</td>
      <td>15</td>
      <td>...</td>
      <td>9986.0</td>
      <td>9984.0</td>
      <td>9989.0</td>
      <td>9992.0</td>
      <td>9993.0</td>
      <td>9994.0</td>
      <td>9994.0</td>
      <td>9988.0</td>
      <td>9989.0</td>
      <td>9990.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>33</td>
      <td>40</td>
      <td>44</td>
      <td>49</td>
      <td>28</td>
      <td>17</td>
      <td>5</td>
      <td>8</td>
      <td>15</td>
      <td>0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>44</td>
      <td>42</td>
      <td>-33</td>
      <td>-16</td>
      <td>-18</td>
      <td>-7</td>
      <td>-21</td>
      <td>-19</td>
      <td>-37</td>
      <td>-27</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 137 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">evals</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;data/magnus_evals.csv&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

